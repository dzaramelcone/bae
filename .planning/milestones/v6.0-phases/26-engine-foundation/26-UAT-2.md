---
status: complete
phase: 26-engine-foundation
source: [26-03-SUMMARY.md, 26-04-SUMMARY.md]
started: 2026-02-15T16:00:00Z
updated: 2026-02-15T16:15:00Z
---

## Current Test

[testing complete]

## Tests

### 1. Graph instance guard
expected: `Graph(start=SomeNode())` raises TypeError with message "expects a Node class, got an instance" and a fix suggestion
result: pass
note: Guard fires correctly. When constructing inline, Pydantic validation may fire first (Python evaluates arguments before function call). Guard catches the realistic case of passing a pre-built instance.

### 2. Ctrl-C during graph execution
expected: While a graph is running in background, pressing Ctrl-C shows the task menu with a "graph:" entry instead of killing the REPL
result: skipped
reason: Deferred until new Graph API. GRAPH mode can't pass kwargs so graph fails instantly — no window to test Ctrl-C. Code fix verified (start_new_session=True on lm.py:468).

### 3. Graph completes with timing data
expected: Submit a simple graph (no required start-node fields) in GRAPH mode. After completion, `engine.get("g1")` shows `state=DONE` with non-empty `node_timings`
result: skipped
reason: Deferred until new Graph API. No graph available without required start-node fields to test via GRAPH mode.

### 4. Failed graph stores error
expected: Submit a graph whose start node has required fields (will fail). `engine.get("gN")` shows `state=FAILED` and `error` contains the exception message (e.g. TypeError about missing fields)
result: pass
note: Observed directly — `[graph] g1 failed: TypeError: IsTheUserGettingDressed requires: user_info, user_message`. Error stored in GraphRun.error and read by done callback.

### 5. Graph error appears in channel
expected: When a graph fails, the [graph] channel shows an error message like "gN failed: TypeError: ..." so Dzara can see what went wrong without inspecting engine.get()
result: pass
note: `[graph] g1 failed: TypeError: IsTheUserGettingDressed requires: user_info, user_message` appeared immediately in channel output.

## Summary

total: 5
passed: 3
issues: 0
pending: 0
skipped: 2

## Gaps

[none]

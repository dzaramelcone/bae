---
phase: 32.2-userview-tool-call-stripping
plan: 02
subsystem: ui
tags: [inspect, xml-signatures, resourcespace, entry-display]

requires:
  - phase: 32-resourcespace-navigation
    provides: ResourceRegistry._entry_display with functions table
provides:
  - Typed XML tag signatures in resource entry functions table
  - _tool_signature and _tool_docstring helper functions
affects: [32.2-03, userview-display]

tech-stack:
  added: []
  patterns: [inspect.signature for tool signature extraction, XML tag format for tool display]

key-files:
  created: []
  modified:
    - bae/repl/spaces/view.py
    - tests/test_resource.py

key-decisions:
  - "Body-content write format shows content param between open/close tags: <Write:target:str>content:str</Write>"
  - "Fallback for missing tool callables renders plain <Tag> without params"

patterns-established:
  - "_tool_signature builds XML tag format from inspect.signature for display"
  - "_tool_docstring extracts first line of method docstring"

duration: 2min
completed: 2026-02-16
---

# Phase 32.2 Plan 02: Typed XML Signatures Summary

**Functions table shows `<Read:target:str>` XML tag format with typed params and first-line docstrings via inspect.signature**

## Performance

- **Duration:** 2 min
- **Started:** 2026-02-16T20:59:02Z
- **Completed:** 2026-02-16T21:01:07Z
- **Tasks:** 1
- **Files modified:** 2

## Accomplishments
- Functions table header changed from Tool/Function/Returns to Tool/Signature/Description
- Each tool row shows XML tag syntax with typed parameters (e.g., `<Read:target:str>`)
- Write tool renders body-content format: `<Write:target:str>content:str</Write>`
- Docstring first line populates Description column
- Graceful fallback for uninspectable callables and missing annotations
- 11 new tests covering signatures, docstrings, and entry display rendering

## Task Commits

Each task was committed atomically:

1. **Task 1: Add typed XML signatures to resource entry functions table** - `5acb00c` (feat)

## Files Created/Modified
- `bae/repl/spaces/view.py` - Added import inspect, _tool_signature, _tool_docstring helpers; replaced functions table rendering
- `tests/test_resource.py` - Added TestToolSignature, TestToolDocstring, TestEntryDisplaySignatures test classes

## Decisions Made
- Body-content format for write: content param shown between open/close XML tags rather than inline
- Tools in supported_tools() but not in tools() map get plain `<Tag>` fallback (no crash)

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 1 - Bug] Fixed test for uninspectable callable**
- **Found during:** Task 1 verification
- **Issue:** Plan suggested `len` as uninspectable builtin, but Python 3.14 supports `inspect.signature(len)`
- **Fix:** Used a truly uninspectable object (class with `__call__ = None`) instead of `len`
- **Files modified:** tests/test_resource.py
- **Verification:** Test passes confirming graceful fallback
- **Committed in:** 5acb00c (Task 1 commit)

---

**Total deviations:** 1 auto-fixed (1 bug)
**Impact on plan:** Test fix necessary for Python 3.14 compatibility. No scope creep.

## Issues Encountered
None

## User Setup Required
None - no external service configuration required.

## Next Phase Readiness
- Functions table renders typed XML signatures for all resource entry displays
- Ready for plan 03 (tool parameter validation or display stripping)

---
*Phase: 32.2-userview-tool-call-stripping*
*Completed: 2026-02-16*

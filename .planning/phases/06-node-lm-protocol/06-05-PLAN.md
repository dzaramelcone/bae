---
phase: 06-node-lm-protocol
plan: 05
type: execute
wave: 2
depends_on: ["06-01", "06-02", "06-03", "06-04"]
files_modified:
  - bae/__init__.py
autonomous: true

must_haves:
  truths:
    - "All new public symbols are exported from bae package"
    - "All existing exports still work"
    - "Full test suite passes with zero failures"
    - "No import errors when importing from bae"
  artifacts:
    - path: "bae/__init__.py"
      provides: "Updated package exports including NodeConfig, classify_fields, etc."
      contains: "NodeConfig"
  key_links:
    - from: "bae/__init__.py"
      to: "bae/node.py"
      via: "NodeConfig import"
      pattern: "from bae.node import.*NodeConfig"
---

<objective>
Update package exports in bae/__init__.py to include any new public symbols from Phase 6, and run the full test suite to verify zero regressions across all plans.

Purpose: Final integration check. Ensures all Phase 6 pieces work together and nothing is broken. This is the "ship it" gate.

Output: Updated exports, verified green test suite.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-node-lm-protocol/06-CONTEXT.md
@.planning/phases/06-node-lm-protocol/06-01-SUMMARY.md
@.planning/phases/06-node-lm-protocol/06-02-SUMMARY.md
@.planning/phases/06-node-lm-protocol/06-03-SUMMARY.md
@.planning/phases/06-node-lm-protocol/06-04-SUMMARY.md
@bae/__init__.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update package exports</name>
  <files>bae/__init__.py</files>
  <action>
    Review all new public symbols from Plans 01-04 and ensure they are exported:

    From Plan 01 (node.py): NodeConfig is already exported. Verify it still imports correctly after the redesign (it's now a standalone TypedDict, not extending ConfigDict). `_wants_lm` is private (underscore prefix) -- do NOT export.

    From Plan 02 (compiler.py): node_to_signature is already exported. No new public symbols (is_start is just a parameter). Verify it still imports correctly.

    From Plan 03 (result.py): GraphResult is already exported. No new public symbols (.result is a property on the existing class). Verify it still imports correctly now that it's Generic.

    From Plan 04 (lm.py, dspy_backend.py): choose_type and fill are methods on existing classes (LM, PydanticAIBackend, ClaudeCLIBackend, DSPyBackend). No new top-level exports needed. Verify all backend classes still import correctly.

    Check that the __all__ list is complete and accurate. Add any missing symbols. Remove nothing.

    Verify with a quick import smoke test:
    ```python
    python -c "from bae import Node, NodeConfig, Graph, GraphResult, LM, DSPyBackend, classify_fields, resolve_fields, node_to_signature, Dep, Recall, Context, Bind; print('All imports OK')"
    ```
  </action>
  <verify>
    `cd /Users/dzaramelcone/lab/bae && python -c "from bae import Node, NodeConfig, Graph, GraphResult, LM, DSPyBackend, classify_fields, resolve_fields, node_to_signature, Dep, Recall, Context, Bind; print('All imports OK')"`
  </verify>
  <done>All public symbols import without error</done>
</task>

<task type="auto">
  <name>Task 2: Full regression test suite</name>
  <files></files>
  <action>
    Run the complete test suite to verify zero regressions:

    ```bash
    cd /Users/dzaramelcone/lab/bae && python -m pytest tests/ -v
    ```

    All tests must pass. If any test fails:
    1. Read the failure output carefully
    2. Determine if it's a genuine regression from Phase 6 changes
    3. Fix the root cause (do NOT delete or skip tests)
    4. Re-run until green

    Expected test files:
    - tests/test_node.py (existing)
    - tests/test_graph.py (existing)
    - tests/test_auto_routing.py (existing)
    - tests/test_compiler.py (existing)
    - tests/test_result.py (existing)
    - tests/test_resolver.py (existing)
    - tests/test_dspy_backend.py (existing)
    - tests/test_bind_validation.py (existing)
    - tests/test_dep_injection.py (existing)
    - tests/test_optimizer.py (existing)
    - tests/test_optimized_lm.py (existing)
    - tests/test_integration.py (existing)
    - tests/test_integration_dspy.py (existing)
    - tests/test_node_config.py (new from Plan 01)
    - tests/test_signature_v2.py (new from Plan 02)
    - tests/test_result_v2.py (new from Plan 03)
    - tests/test_lm_protocol.py (new from Plan 04)
  </action>
  <verify>`cd /Users/dzaramelcone/lab/bae && python -m pytest tests/ -v` -- all tests pass with 0 failures</verify>
  <done>Full test suite green. Zero failures, zero errors.</done>
</task>

</tasks>

<verification>
- All imports work: `python -c "from bae import *; print('OK')"`
- Full test suite: `python -m pytest tests/ -v` passes
- No warnings about deprecated imports or missing symbols
</verification>

<success_criteria>
- bae/__init__.py exports all public symbols correctly
- Full test suite passes with zero failures
- No import errors from any bae module
</success_criteria>

<output>
After completion, create `.planning/phases/06-node-lm-protocol/06-05-SUMMARY.md`
</output>

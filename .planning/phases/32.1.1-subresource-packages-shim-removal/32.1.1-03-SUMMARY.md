---
phase: 32.1.1-subresource-packages-shim-removal
plan: 03
subsystem: api
tags: [resourcespace, refactor, home, view-service]

requires:
  - phase: 32.1.1-01
    provides: Protocol in spaces/view.py, canonical imports established
provides:
  - HomeResourcespace class with public API delegating to service functions
  - home/ package follows view/service convention
affects: [32.1.1-04]

tech-stack:
  added: []
  patterns: [view class delegates to underscore-prefixed service functions]

key-files:
  created: []
  modified:
    - bae/repl/spaces/home/view.py
    - bae/repl/spaces/home/__init__.py
    - bae/repl/ai.py

key-decisions:
  - "Include _LINE_RANGE_RE in home __init__.py exports (ai.py imports it)"

patterns-established:
  - "HomeResourcespace follows same view/service pattern as source resourcespace"
  - "Package __init__.py exports both class and tool functions for backward compat"

duration: 1min
completed: 2026-02-16
---

# Phase 32.1.1 Plan 03: Home View/Service Convention Summary

**HomeResourcespace class in view.py wrapping service _exec_* functions with public names, home/__init__.py re-exporting both class and functions**

## Performance

- **Duration:** 1 min
- **Started:** 2026-02-16T19:30:21Z
- **Completed:** 2026-02-16T19:31:14Z
- **Tasks:** 1
- **Files modified:** 3

## Accomplishments
- HomeResourcespace class created in view.py with read/write/edit_read/edit_replace/glob/grep methods
- home/__init__.py updated with __all__ exporting both class and backward-compat _exec_* functions
- ai.py import updated from home.service to home package re-export

## Task Commits

Each task was committed atomically:

1. **Task 1: Create HomeResourcespace in view.py and update exports** - `95b7123` (feat)

## Files Created/Modified
- `bae/repl/spaces/home/view.py` - HomeResourcespace class delegating to service functions
- `bae/repl/spaces/home/__init__.py` - Selective re-exports with __all__
- `bae/repl/ai.py` - Import from package instead of service module

## Decisions Made
- Included `_LINE_RANGE_RE` in home/__init__.py exports since ai.py imports it from home.service (plan omitted this)

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 2 - Missing Critical] Added _LINE_RANGE_RE to package exports**
- **Found during:** Task 1 (Update __init__.py exports)
- **Issue:** Plan's __init__.py template omitted _LINE_RANGE_RE, but ai.py imports it from home.service
- **Fix:** Added _LINE_RANGE_RE to both the import and __all__ in __init__.py
- **Files modified:** bae/repl/spaces/home/__init__.py
- **Verification:** All 787 tests pass, ai.py import works
- **Committed in:** 95b7123 (Task 1 commit)

---

**Total deviations:** 1 auto-fixed (1 missing critical)
**Impact on plan:** Necessary to maintain ai.py import compatibility. No scope creep.

## Issues Encountered
None

## User Setup Required
None - no external service configuration required.

## Next Phase Readiness
- Home package now follows view/service convention matching source/
- Ready for 32.1.1-04 (final plan in phase)
- All imports canonical, all tests passing

---
*Phase: 32.1.1-subresource-packages-shim-removal*
*Completed: 2026-02-16*
